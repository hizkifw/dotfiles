#!/usr/bin/env bash

set -e

cwd="$(pwd)"

makelink() {
  target="$cwd/dot/$1"
  linkname="$HOME/$2"

  if [[ -e "$linkname" ]]; then
    newname="$linkname-$(date +%s)"
    mv "$linkname" "$newname"
    echo "Warn: target exists, renamed to $newname"
  fi

  mkdir -p `dirname "$linkname"`
  ln -s "$target" "$linkname"
}

makelink tmux.conf .tmux.conf
makelink zshrc .zshrc
makelink gitconfig .gitconfig
makelink xinitrc .xinitrc
makelink nvim .config/nvim
makelink kitty .config/kitty
makelink i3 .config/i3
